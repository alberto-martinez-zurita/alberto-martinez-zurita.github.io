<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inteligencia Artificial: Entiende, Comprende y Aprende</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #f0f0f0;
            display: flex;
            min-height: 100vh;
            overflow-x: hidden;
            scroll-behavior: smooth; /* Scroll suave para los anclas */
        }

        /* Estilos para el menú lateral */
        .sidebar {
            width: 250px;
            background-color: #333;
            color: white;
            padding: 20px 0;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            box-shadow: 2px 0 5px rgba(0,0,0,0.2);
            z-index: 1000;
        }

        .sidebar h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #007bff;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar ul li a {
            display: block;
            padding: 12px 20px;
            color: white;
            text-decoration: none;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .sidebar ul li a:hover,
        .sidebar ul li a.active {
            background-color: #007bff;
            color: white;
        }

        /* Contenedor principal de los iframes */
        .main-content {
            flex-grow: 1;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Contenedor para cada iframe */
        .iframe-container {
            background-color: #fff;
            border: 1px solid #ccc;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            padding: 20px; /* Padding alrededor del iframe */
            margin-bottom: 40px; /* Espacio entre iframes */
            text-align: center;
            max-width: 1322px; /* Ancho máximo para el contenido del iframe */
            margin-left: auto;
            margin-right: auto;
            min-height: 200px; /* Altura mínima para que el iframe no colapse antes de cargar */
            display: flex; /* Para centrar el iframe internamente */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
            position: relative; /* Necesario para la barra de progreso */
        }

        iframe {
            width: 100%;
            height: auto; /* La altura se ajustará con JS */
            min-height: 100px; /* Mínimo para que no se vea vacío mientras carga */
            border: none;
            display: block;
            overflow: hidden; /* Muy importante para ocultar barras de scroll del iframe */
        }

        /* Media queries para pantallas más pequeñas */
        @media (max-width: 900px) {
            body {
                flex-direction: column;
            }
            .sidebar {
                position: static;
                width: 100%;
                height: auto;
                padding: 15px 0;
            }
            .sidebar ul {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
            }
            .sidebar ul li a {
                padding: 8px 15px;
                font-size: 0.9em;
            }
            .main-content {
                padding: 15px;
            }
            .iframe-container {
                padding: 15px;
                margin-bottom: 25px;
            }
        }
    </style>
</head>
<body>
    <aside class="sidebar">
        <h2>Inteligencia Artificial</h2>
        <nav>
            <ul id="navList">
                </ul>
        </nav>
    </aside>

    <main class="main-content" id="mainContent">
        <p style="text-align: center; color: #666;">Cargando contenido de la presentación...</p>
        </main>

    <script>
        const totalPages = 15;
        const navList = document.getElementById('navList');
        const mainContent = document.getElementById('mainContent');
        const iframeReferences = []; // Para almacenar referencias a los iframes y sus contenedores

        // Función para obtener el título de la página
        function getPageTitle(pageNumber) {
            let title = `Página ${pageNumber}`; // Título por defecto

            switch (pageNumber) {
                case 1:
                    title = "De la Ficción a la Realidad"; // Cambia este texto
                    break;
                case 2:
                    title = "¿Qué es la IA?"; // Cambia este texto
                    break;
                case 3:
                    title = "Determinismo vs No Determinismo"; // Cambia este texto
                    break;
                case 4:
                    title = "¿Cómo Funciona la IA?"; // Cambia este texto
                    break;
                case 5:
                    title = "¿Cómo Aprende la IA?"; // Cambia este texto
                    break;
                case 6:
                    title = "Tipos de IA"; // Cambia este texto
                    break;
                case 7:
                    title = "Comprender su Impacto"; // Cambia este texto
                    break;
                case 8:
                    title = "Contexto Histórico"; // Cambia este texto
                    break;
                case 9:
                    title = "Impacto en las Personas"; // Cambia este texto
                    break;
                case 10:
                    title = "Respuesta de los Gobiernos"; // Cambia este texto
                    break;
                case 11:
                    title = "Futuro de la IA y Cómo Prepararse"; // Cambia este texto
                    break;
                case 12:
                    title = "Herramientas de IA"; // Cambia este texto
                    break;
                case 13:
                    title = "Prompt Engineering"; // Cambia este texto (ejemplo de la imagen que me mostraste)
                    break;
                case 14:
                    title = "Uso Ético y Responsable de la IA"; // Cambia este texto
                    break;
                case 15:
                    title = "Conclusiones y Futuro"; // Cambia este texto
                    break;
                default:
                    title = `Página ${pageNumber}`; // En caso de que se intente cargar una página fuera del rango 1-15
            }
            return title;
        }

        // Función para redimensionar el iframe (adaptada para un solo iframe)
        function resizeIframe(iframeObj) {
            try {
                // Comprobamos si el contenido del iframe es accesible (misma política de origen)
                if (iframeObj.contentWindow && iframeObj.contentWindow.document && iframeObj.contentWindow.document.body) {
                    iframeObj.style.height = 'auto'; // Reset height to recalculate
                    // Usamos scrollHeight del body, que incluye todo el contenido (con padding, etc.)
                    // y añadimos un pequeño margen por si acaso.
                    iframeObj.style.height = iframeObj.contentWindow.document.body.scrollHeight + 20 + 'px'; // +20px de seguridad
                } else {
                    console.warn(`No se pudo redimensionar el iframe ${iframeObj.id}. Posiblemente por restricciones de seguridad (Cross-Origin) o contenido no cargado.`);
                    iframeObj.style.height = '600px'; // Altura de fallback (ajustar si es necesario)
                }
            } catch (e) {
                console.error(`Error al redimensionar el iframe ${iframeObj.id}:`, e);
                iframeObj.style.height = '600px'; // Altura de fallback
            }
        }

        // Función para crear y cargar un iframe para una página específica
        function createAndLoadIframe(pageNumber) {
            const fileName = `${String(pageNumber).padStart(2, '0')}.html`;
            const sectionId = `slide${String(pageNumber).padStart(2, '0')}`;

            // Crear el contenedor para el iframe (que será la sección a la que se ancla el menú)
            const container = document.createElement('section');
            container.id = sectionId;
            container.classList.add('iframe-container');
            mainContent.appendChild(container); // Añadir al DOM antes de cargar el iframe

            // Crear el iframe
            const iframe = document.createElement('iframe');
            iframe.src = fileName;
            iframe.id = `iframe-${pageNumber}`;
            iframe.title = getPageTitle(pageNumber); // Usamos el título del switch
            iframe.onload = () => {
                resizeIframe(iframe);
                // Si la página interna tiene imágenes, podrían tardar en cargar.
                // Re-redimensionar después de un breve retardo para dar tiempo a las imágenes.
                setTimeout(() => resizeIframe(iframe), 200);
            };
            iframe.onerror = () => { // Manejo de errores para cuando el iframe no se carga
                console.error(`Error al cargar el archivo: ${fileName}`);
                iframe.srcdoc = `<p style="color: red; text-align: center;">Error: No se pudo cargar el contenido de la página ${pageNumber}. Asegúrate de que el archivo existe y la URL es correcta.</p>`;
                iframe.style.height = '200px'; // Altura fija para el mensaje de error
            };
            container.appendChild(iframe);

            iframeReferences.push({ id: sectionId, element: container }); // Guardar referencia al contenedor

            // Crear el enlace en el menú de navegación
            const listItem = document.createElement('li');
            const link = document.createElement('a');
            link.href = `#${sectionId}`;
            link.textContent = getPageTitle(pageNumber); // ¡Aquí se usa la nueva función!
            link.setAttribute('data-page', pageNumber); // Para referencia
            listItem.appendChild(link);
            navList.appendChild(listItem);

            // Añadir el listener para scroll suave a este nuevo enlace
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetSection = document.querySelector(targetId);
                if (targetSection) {
                    targetSection.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        }

        // Función para cargar todos los iframes al inicio
        async function loadAllIframePages() {
            mainContent.innerHTML = ''; // Limpiar el mensaje de "Cargando..."
            for (let i = 1; i <= totalPages; i++) {
                createAndLoadIframe(i); // No necesitamos 'await' aquí, se cargan en paralelo
            }
            // Después de iniciar la carga de todos los iframes, configuramos el observador de scroll
            window.addEventListener('scroll', setActiveNavLink);
            // Llamar una vez al cargar la página para establecer el estado inicial (ej. si ya hay scroll)
            setActiveNavLink();
        }

        // Función para añadir la clase 'active' al enlace de navegación correcto
        function setActiveNavLink() {
            let currentActiveSectionId = '';
            // Umbral para determinar qué sección es "activa" (ej. cuando su parte superior pasa el 30% del viewport)
            const scrollThreshold = window.innerHeight * 0.3;

            // Recorrer las secciones de abajo hacia arriba para encontrar la primera que está en el umbral
            for (let i = iframeReferences.length - 1; i >= 0; i--) {
                const section = iframeReferences[i].element;
                const rect = section.getBoundingClientRect();

                // Si la parte superior de la sección está por encima o en el umbral, y su parte inferior no ha salido completamente de la vista
                if (rect.top <= scrollThreshold && rect.bottom > 0) {
                    currentActiveSectionId = section.id;
                    break;
                }
            }

            // Caso especial: si el usuario ha hecho scroll hasta el final de la página
            if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 50) { // Margen de 50px para el final
                 if (iframeReferences.length > 0) { // Asegurarse de que haya al menos una referencia
                    currentActiveSectionId = iframeReferences[iframeReferences.length - 1].id;
                 }
            }


            // Remover 'active' de todos los enlaces y añadirlo al actual
            const navLinks = navList.querySelectorAll('a');
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${currentActiveSectionId}`) {
                    link.classList.add('active');
                }
            });
        }

        // Iniciar la carga de las páginas cuando el DOM esté completamente cargado
        document.addEventListener('DOMContentLoaded', loadAllIframePages);

        // Opcional: Re-ajustar iframes si la ventana cambia de tamaño (por si el contenido cambia de tamaño)
        window.addEventListener('resize', () => {
            iframeReferences.forEach(ref => {
                const iframe = ref.element.querySelector('iframe');
                if (iframe) resizeIframe(iframe);
            });
            setActiveNavLink(); // Reajustar enlace activo por si el scroll o la posición cambian
        });
    </script>
</body>
</html>