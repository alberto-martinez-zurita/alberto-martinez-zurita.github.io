<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dirigiendo la Orquesta del Futuro: IA Generativa</title>
    <!-- Fuentes importadas de 01.html -->
    <link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&amp;family=Nunito:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
    
    <style>
        body {
            /* Estilos alineados con 01.html */
            font-family: 'Nunito', sans-serif;
            margin: 0;
            background-color: #3d3e41; /* Fondo oscuro principal */
            color: white;
            display: flex;
            min-height: 100vh;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        /* Estilos para el menú lateral (sidebar) */
        .sidebar {
            width: 280px; /* Un poco más de espacio para los títulos */
            background-color: #11131A; /* Un tono más oscuro que el fondo */
            color: white;
            padding: 20px 0;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            box-shadow: 2px 0 5px rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .sidebar h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #B165FB; /* Color de acento morado */
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 20px;
        }

        .sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar ul li a {
            display: block;
            padding: 12px 25px; /* Más padding */
            color: #d1d5db; /* Gris claro */
            text-decoration: none;
            transition: background-color 0.3s ease, color 0.3s ease;
            font-size: 14px; /* Tamaño de fuente ajustado */
            border-left: 3px solid transparent; /* Indicador */
        }

        .sidebar ul li a:hover {
            background-color: #1f2937; /* Fondo hover sutil */
            color: white;
        }
        
        .sidebar ul li a.active {
            background-color: #2c213a; /* Fondo activo morado oscuro */
            color: white;
            font-weight: 600;
            border-left: 3px solid #B165FB; /* Indicador activo morado */
        }

        /* Contenedor principal de los iframes */
        .main-content {
            flex-grow: 1;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Contenedor para cada iframe */
        .iframe-container {
            /* Eliminamos fondo, borde y sombra para integrar los iframes */
            background-color: transparent; 
            border: none;
            box-shadow: none;
            padding: 0; /* Sin padding, el iframe tiene el suyo */
            margin-bottom: 20px; /* Espacio entre iframes */
            text-align: center;
            max-width: 1280px; /* Ancho de la diapositiva 01.html */
            margin-left: auto;
            margin-right: auto;
            min-height: 720px; /* Altura de la diapositiva 01.html */
            display: flex; 
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
            position: relative; 
            overflow: hidden; /* Para asegurar que encaje */
        }

        iframe {
            width: 1280px; /* Ancho fijo */
            height: 720px; /* Altura fija */
            border: none;
            display: block;
            overflow: hidden; 
            /* Añadimos transform para escalar si es necesario, aunque con ancho fijo es más simple */
        }

        /* Media queries para pantallas más pequeñas (simplificado) */
        @media (max-width: 1600px) {
            .iframe-container {
                /* Permitir que el iframe escale manteniendo la proporción */
                width: 100%;
                height: auto;
                aspect-ratio: 16 / 9; /* Mantiene 1280x720 */
                min-height: 0;
            }
            iframe {
                width: 100%;
                height: 100%; /* El aspect-ratio del padre controla la altura */
                position: absolute;
                top: 0;
                left: 0;
            }
        }

        @media (max-width: 900px) {
            body {
                flex-direction: column;
            }
            .sidebar {
                position: static;
                width: 100%;
                height: auto;
                padding: 15px 0;
            }
            .sidebar ul {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
            }
            .sidebar ul li a {
                padding: 8px 15px;
                font-size: 0.9em;
                border: none;
            }
            .sidebar ul li a.active {
                border: none;
                background-color: #B165FB;
            }
            .main-content {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <aside class="sidebar">
        <h2>IA Generativa</h2>
        <nav>
            <ul id="navList">
                </ul>
        </nav>
    </aside>

    <main class="main-content" id="mainContent">
        <p style="text-align: center; color: #666;">Cargando contenido de la presentación...</p>
    </main>

    <script>
        // CAMBIO B: Total de páginas actualizado a 24
        const totalPages = 24; 
        const navList = document.getElementById('navList');
        const mainContent = document.getElementById('mainContent');
        const iframeReferences = []; 

        // CAMBIO B: Títulos actualizados para las 24 diapositivas
        function getPageTitle(pageNumber) {
            let title = `Página ${pageNumber}`; // Título por defecto

            switch (pageNumber) {
                case 1: title = "1. Portada: Dirigiendo la Orquesta"; break;
                case 2: title = "2. El 'Por Qué': Desafíos de Negocio"; break;
                case 3: title = "3. El 'Cómo': Tú eres el Director"; break;
                case 4: title = "4. M1: Ecosistema (Instrumentos)"; break;
                case 5: title = "5. M1: Línea de Tiempo Exponencial"; break;
                case 6: title = "6. M2: Intro - Método D.I.R.E.C.T.O.R."; break;
                case 7: title = "7. M2: D - Delimitadores"; break;
                case 8: title = "8. M2: I - Instrucciones"; break;
                case 9: title = "9. M2: R - Rol (Persona)"; break;
                case 10: title = "10. M2: E - Ejemplos (Shots)"; break;
                case 11: title = "11. M2: C - Contexto"; break;
                case 12: title = "12. M2: T - Test (Iteración)"; break;
                case 13: title = "13. M2: O - Objetivo"; break;
                case 14: title = "14. M2: R - Restricciones"; break;
                case 15: title = "15. M3: Intro - Técnicas Avanzadas"; break;
                case 16: title = "16. M3: Chain-of-Thought (CoT)"; break;
                case 17: title = "17. M3: RAG (Retrieval-Augmented Gen)"; break;
                case 18: title = "18. M3: ReAct (Reason + Act)"; break;
                case 19: title = "19. M3: Prompt Chaining"; break;
                case 20: title = "20. El 'Qué': Intro Casos de Uso"; break;
                case 21: title = "21. Caso 1: Oficinas (Préstamos)"; break;
                case 22: title = "22. Caso 2: IT (Migración Legacy)"; break;
                case 23: title = "23. Caso 3: SSCC (Programa Agora)"; break;
                case 24: title = "24. Cierre: Reglas de Oro"; break;
                default:
                    title = `Página ${pageNumber}`;
            }
            return title;
        }

        // Función para redimensionar el iframe (ajustada para altura fija)
        function resizeIframe(iframeObj) {
            // Con el CSS actual, el tamaño es fijo 1280x720
            // y se escala con aspect-ratio.
            // Esta función es menos crítica ahora, pero la mantenemos por si acaso.
            try {
                // Forzamos el tamaño deseado
                iframeObj.style.height = '720px';
                iframeObj.style.width = '1280px';
                
                // Si el contenedor padre se escala, el iframe lo hará.
                const container = iframeObj.parentElement;
                if (window.innerWidth < 1600) {
                     // En pantallas más pequeñas, el CSS de aspect-ratio maneja esto.
                     // Reseteamos a 100% para que llene el contenedor.
                    iframeObj.style.height = '100%';
                    iframeObj.style.width = '100%';
                }
                
            } catch (e) {
                console.error(`Error al redimensionar el iframe ${iframeObj.id}:`, e);
            }
        }

        // Función para crear y cargar un iframe para una página específica
        function createAndLoadIframe(pageNumber) {
            const fileName = `${String(pageNumber).padStart(2, '0')}.html`;
            const sectionId = `slide${String(pageNumber).padStart(2, '0')}`;

            const container = document.createElement('section');
            container.id = sectionId;
            container.classList.add('iframe-container');
            mainContent.appendChild(container); 

            const iframe = document.createElement('iframe');
            iframe.src = fileName;
            iframe.id = `iframe-${pageNumber}`;
            iframe.title = getPageTitle(pageNumber); 
            iframe.scrolling = "no"; // Evitar barras de scroll
            iframe.onload = () => {
                resizeIframe(iframe);
            };
            iframe.onerror = () => { 
                console.error(`Error al cargar el archivo: ${fileName}`);
                container.innerHTML = `<p style="color: #ff8a8a; text-align: center; height: 720px; display: flex; align-items: center; justify-content: center; font-size: 24px;">Error: No se pudo cargar ${fileName}.</p>`;
            };
            container.appendChild(iframe);

            iframeReferences.push({ id: sectionId, element: container }); 

            // Crear el enlace en el menú de navegación
            const listItem = document.createElement('li');
            const link = document.createElement('a');
            link.href = `#${sectionId}`;
            link.textContent = getPageTitle(pageNumber); 
            link.setAttribute('data-page', pageNumber); 
            listItem.appendChild(link);
            navList.appendChild(listItem);

            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetSection = document.querySelector(targetId);
                if (targetSection) {
                    targetSection.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        }

        // Función para cargar todos los iframes al inicio
        async function loadAllIframePages() {
            mainContent.innerHTML = ''; 
            for (let i = 1; i <= totalPages; i++) {
                createAndLoadIframe(i); 
            }
            window.addEventListener('scroll', setActiveNavLink);
            setActiveNavLink();
        }

        // Función para añadir la clase 'active' al enlace de navegación correcto
        function setActiveNavLink() {
            let currentActiveSectionId = '';
            const scrollThreshold = window.innerHeight * 0.3;

            for (let i = iframeReferences.length - 1; i >= 0; i--) {
                const section = iframeReferences[i].element;
                const rect = section.getBoundingClientRect();
                if (rect.top <= scrollThreshold && rect.bottom > 0) {
                    currentActiveSectionId = section.id;
                    break;
                }
            }
            if (!currentActiveSectionId && iframeReferences.length > 0 && window.scrollY < 200) {
                 currentActiveSectionId = iframeReferences[0].id; // Activa el primero si estamos arriba
            }

            if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 50) { 
                 if (iframeReferences.length > 0) { 
                    currentActiveSectionId = iframeReferences[iframeReferences.length - 1].id;
                 }
            }

            const navLinks = navList.querySelectorAll('a');
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${currentActiveSectionId}`) {
                    link.classList.add('active');
                }
            });
        }

        document.addEventListener('DOMContentLoaded', loadAllIframePages);

        window.addEventListener('resize', () => {
            iframeReferences.forEach(ref => {
                const iframe = ref.element.querySelector('iframe');
                if (iframe) resizeIframe(iframe);
            });
            setActiveNavLink(); 
        });
    </script>
</body>
</html>
