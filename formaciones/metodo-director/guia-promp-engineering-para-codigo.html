<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu√≠a de Prompt Engineering para C√≥digo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Neutrals -->
    <!-- Application Structure Plan: A single-page application with a fixed sidebar for navigation and a dynamic main content area. This dashboard-style structure is chosen over a linear document to allow engineers from different domains (backend, QA, etc.) to quickly access relevant sections like the Template Library or Evaluation Metrics without scrolling through the entire guide. Key interactions include a filterable template library with copy-to-clipboard functionality and an interactive radar chart for visualizing evaluation metrics. This prioritizes user task completion and efficient information retrieval. -->
    <!-- Visualization & Content Choices: 1. Report Info: Prompt templates for various languages/tasks. Goal: Organize/Action. Viz/Presentation: Filterable grid of cards. Interaction: Filter by tag, copy code. Justification: Fast access to actionable assets is a core user need. Library/Method: Vanilla JS, HTML, Tailwind. 2. Report Info: Evaluation metrics (automatic, semantic). Goal: Compare/Inform. Viz/Presentation: Radar chart. Interaction: Hover tooltips. Justification: A radar chart provides a holistic, multi-dimensional view of prompt quality, which is more intuitive than a table of numbers. Library/Method: Chart.js (Canvas). 3. Report Info: CI/CD process for prompts. Goal: Organize/Inform. Viz/Presentation: HTML/CSS flexbox diagram. Interaction: Hover effects on stages. Justification: A visual flow diagram is easier to understand than a block of text describing a process. Library/Method: HTML, Tailwind. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa;
            color: #212529;
        }
        .sidebar-link {
            transition: all 0.2s ease-in-out;
            border-left: 3px solid transparent;
        }
        .sidebar-link.active, .sidebar-link:hover {
            background-color: #e9ecef;
            color: #0056b3;
            border-left-color: #0056b3;
        }
        .page-section {
            display: none;
        }
        .page-section.active {
            display: block;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .code-block {
            position: relative;
            background-color: #282c34;
            color: #abb2bf;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
        }
        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: #444c56;
            color: white;
            border: none;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            cursor: pointer;
            font-size: 0.8rem;
        }
        .copy-btn:hover {
            background-color: #586069;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .cicd-step {
            flex: 1;
            text-align: center;
            padding: 1rem;
            border: 2px solid #dee2e6;
            border-radius: 0.5rem;
            background-color: #fff;
            position: relative;
        }
        .cicd-step:not(:last-child)::after {
            content: '‚Üí';
            position: absolute;
            right: -24px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
            color: #6c757d;
        }
        .tag-button {
             transition: all 0.2s ease;
        }
        .tag-button.active {
            background-color: #0056b3;
            color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="flex h-screen">

    <aside id="sidebar" class="w-64 bg-white shadow-md flex-shrink-0 overflow-y-auto">
        <div class="p-6">
            <h1 class="text-xl font-bold text-gray-800">Gu√≠a de Prompt Engineering</h1>
            <p class="text-sm text-gray-500">Para C√≥digo en Producci√≥n</p>
        </div>
        <nav class="mt-4">
            <a href="#resumen" class="sidebar-link active block py-2.5 px-6 text-gray-700 font-medium">Resumen Ejecutivo</a>
            <a href="#fundamentos" class="sidebar-link block py-2.5 px-6 text-gray-700 font-medium">Fundamentos</a>
            <a href="#anatomia" class="sidebar-link block py-2.5 px-6 text-gray-700 font-medium">Anatom√≠a del Prompt</a>
            <a href="#tecnicas" class="sidebar-link block py-2.5 px-6 text-gray-700 font-medium">T√©cnicas Avanzadas</a>
            <a href="#diseno" class="sidebar-link block py-2.5 px-6 text-gray-700 font-medium">Dise√±o Sistem√°tico</a>
            <a href="#plantillas" class="sidebar-link block py-2.5 px-6 text-gray-700 font-medium">Biblioteca de Plantillas</a>
            <a href="#evaluacion" class="sidebar-link block py-2.5 px-6 text-gray-700 font-medium">Evaluaci√≥n y M√©tricas</a>
            <a href="#seguridad" class="sidebar-link block py-2.5 px-6 text-gray-700 font-medium">Seguridad y √âtica</a>
            <a href="#operativa" class="sidebar-link block py-2.5 px-6 text-gray-700 font-medium">Operativa y Mantenimiento</a>
            <a href="#recursos" class="sidebar-link block py-2.5 px-6 text-gray-700 font-medium">Recursos (Chuleta)</a>
        </nav>
    </aside>

    <main class="flex-1 p-6 lg:p-10 overflow-y-auto">
        <div id="resumen" class="page-section active">
            <h2 class="text-3xl font-bold mb-4 text-gray-900">Resumen Ejecutivo</h2>
            <p class="text-lg text-gray-600 mb-6">Esta gu√≠a presenta el Prompt Engineering para c√≥digo no como un arte, sino como una disciplina de ingenier√≠a de sistemas formal, rigurosa y medible. El objetivo es capacitar a los equipos para construir sistemas de IA fiables, seguros y eficientes, integrando el ciclo de vida del prompt en las pr√°cticas de MLOps/LLMOps modernas.</p>
            <div class="grid md:grid-cols-2 gap-6">
                <div class="card p-6">
                    <h3 class="font-bold text-lg mb-2">P√∫blico Objetivo</h3>
                    <ul class="list-disc list-inside text-gray-700 space-y-1">
                        <li>Ingenieros Backend, Frontend, Datos</li>
                        <li>Equipos de DevOps y SRE</li>
                        <li>Ingenieros de QA y Automatizaci√≥n</li>
                        <li>Arquitectos de Software y Sistemas de IA</li>
                        <li>L√≠deres de Producto T√©cnico</li>
                    </ul>
                </div>
                <div class="card p-6">
                    <h3 class="font-bold text-lg mb-2">Principios de Dise√±o</h3>
                    <ul class="list-disc list-inside text-gray-700 space-y-1">
                        <li><strong>Producci√≥n Primero:</strong> Enfoque en robustez, evaluaci√≥n y mantenimiento.</li>
                        <li><strong>Code-as-Prompt:</strong> Tratar los prompts con el mismo rigor que el c√≥digo fuente.</li>
                        <li><strong>Evaluaci√≥n Continua:</strong> Integraci√≥n de m√©tricas en pipelines de CI/CD.</li>
                        <li><strong>Seguridad por Dise√±o:</strong> Mitigaci√≥n de riesgos desde la concepci√≥n del prompt.</li>
                    </ul>
                </div>
            </div>
        </div>

        <div id="fundamentos" class="page-section">
            <h2 class="text-3xl font-bold mb-4 text-gray-900">Fundamentos</h2>
            <p class="text-lg text-gray-600 mb-6">Para construir prompts efectivos, es crucial entender c√≥mo los LLMs procesan la informaci√≥n y c√≥mo se integran en sistemas m√°s amplios. Esta secci√≥n explora los patrones de arquitectura que combinan el prompting con herramientas externas para crear soluciones robustas.</p>
            <div class="card p-6">
                <h3 class="font-bold text-xl mb-4">Arquitecturas de Sistemas de IA Basados en Prompts</h3>
                <p class="mb-6">Los prompts rara vez operan de forma aislada. Las arquitecturas modernas los combinan con otras tecnolog√≠as para superar las limitaciones inherentes de los LLMs, como la falta de conocimiento actualizado o la incapacidad de ejecutar acciones en el mundo real.</p>
                <div class="space-y-4">
                    <div class="p-4 border rounded-lg">
                        <h4 class="font-semibold text-lg">RAG (Retrieval-Augmented Generation)</h4>
                        <p class="text-gray-700"><strong>Objetivo:</strong> Reducir alucinaciones y usar conocimiento privado. El sistema primero recupera documentos relevantes de una base de datos vectorial y los inyecta en el contexto del prompt, permitiendo al LLM responder bas√°ndose en informaci√≥n actualizada y espec√≠fica.</p>
                    </div>
                    <div class="p-4 border rounded-lg">
                        <h4 class="font-semibold text-lg">Agentes con Herramientas (Tool-Using Agents)</h4>
                        <p class="text-gray-700"><strong>Objetivo:</strong> Permitir que el LLM interact√∫e con sistemas externos. El LLM puede decidir usar una "herramienta" (una API, una funci√≥n de c√≥digo) para obtener informaci√≥n o realizar una acci√≥n. El resultado de la herramienta se re-inyecta en el contexto para que el LLM contin√∫e su razonamiento (Patr√≥n ReAct).</p>
                    </div>
                    <div class="p-4 border rounded-lg">
                        <h4 class="font-semibold text-lg">Ciclo Generar-Ejecutar-Verificar</h4>
                        <p class="text-gray-700"><strong>Objetivo:</strong> Asegurar la correcci√≥n del c√≥digo generado. El LLM genera c√≥digo, un entorno de ejecuci√≥n lo prueba (ejecutando tests, linters), y el resultado (√©xito, fallo, error) se usa como feedback para un nuevo prompt que refina o corrige el c√≥digo, iterando hasta cumplir los criterios.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="anatomia" class="page-section">
            <h2 class="text-3xl font-bold mb-4 text-gray-900">Anatom√≠a del Prompt de C√≥digo</h2>
            <p class="text-lg text-gray-600 mb-6">Un prompt de alta calidad es estructurado, expl√≠cito y no deja lugar a la ambig√ºedad. Adoptar una anatom√≠a consistente asegura reproducibilidad y facilita la evaluaci√≥n.</p>
            <div class="card p-6 mb-8">
                <h3 class="font-bold text-xl mb-4">Componentes Esenciales</h3>
                <dl class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4">
                    <div class="border-l-4 border-blue-500 pl-4">
                        <dt class="font-semibold text-lg">1. Rol (Persona)</dt>
                        <dd class="text-gray-700">Define la perspectiva del LLM. Ej: "Act√∫a como un ingeniero de software senior experto en optimizaci√≥n de rendimiento en Go."</dd>
                    </div>
                    <div class="border-l-4 border-green-500 pl-4">
                        <dt class="font-semibold text-lg">2. Tarea (Task)</dt>
                        <dd class="text-gray-700">Describe la acci√≥n principal a realizar de forma clara e imperativa. Ej: "Refactoriza la siguiente funci√≥n para reducir su complejidad ciclom√°tica."</dd>
                    </div>
                    <div class="border-l-4 border-yellow-500 pl-4">
                        <dt class="font-semibold text-lg">3. Contexto (Context)</dt>
                        <dd class="text-gray-700">Proporciona el c√≥digo, dependencias, y la informaci√≥n m√≠nima necesaria. Ej: "Aqu√≠ est√° la funci√≥n, sus tests y la definici√≥n del struct que utiliza."</dd>
                    </div>
                    <div class="border-l-4 border-purple-500 pl-4">
                        <dt class="font-semibold text-lg">4. Contrato de Salida (Format)</dt>
                        <dd class="text-gray-700">Especifica el formato exacto de la respuesta. Ej: "Genera √∫nicamente el c√≥digo de la funci√≥n refactorizada en un bloque de c√≥digo markdown para Go. No incluyas explicaciones."</dd>
                    </div>
                    <div class="border-l-4 border-red-500 pl-4">
                        <dt class="font-semibold text-lg">5. Restricciones (Constraints)</dt>
                        <dd class="text-gray-700">Define l√≠mites y comportamientos a evitar. Ej: "No alteres la firma de la funci√≥n. No introduzcas nuevas dependencias."</dd>
                    </div>
                    <div class="border-l-4 border-indigo-500 pl-4">
                        <dt class="font-semibold text-lg">6. Criterios de Aceptaci√≥n</dt>
                        <dd class="text-gray-700">Condiciones que la salida debe cumplir para ser v√°lida. Ej: "El c√≥digo refactorizado debe pasar todos los tests unitarios existentes y tener una puntuaci√≥n de linter superior a 9/10."</dd>
                    </div>
                </dl>
            </div>
             <div class="grid md:grid-cols-2 gap-6">
                <div class="card p-6 border-t-4 border-red-500">
                    <h3 class="font-bold text-lg mb-2 text-red-700">Ejemplo Ambiguo üëé</h3>
                    <pre class="bg-red-50 p-3 rounded text-sm text-red-900"><code>Mejora este c√≥digo Python.

def process_data(data):
    # ... mucho c√≥digo anidado ...
    return result</code></pre>
                    <p class="mt-2 text-sm text-gray-600"><strong>Diagn√≥stico:</strong> 'Mejora' es subjetivo. Falta rol, contexto (¬øqu√© hace?), contrato de salida y restricciones. El resultado es impredecible.</p>
                </div>
                <div class="card p-6 border-t-4 border-green-500">
                    <h3 class="font-bold text-lg mb-2 text-green-700">Ejemplo Prescriptivo üëç</h3>
                    <pre class="bg-green-50 p-3 rounded text-sm text-green-900"><code>**Rol:** Ingeniero Python Senior, experto en c√≥digo limpio.
**Tarea:** Refactoriza la funci√≥n `process_data` para mejorar su legibilidad aplicando el patr√≥n "Guard Clause".
**Contexto:**
```python
def process_data(data):
    if data is not None:
        if 'items' in data and len(data['items']) > 0:
            # ... m√°s l√≥gica anidada ...
            return "Processed"
        else:
            return "No items"
    else:
        return "No data"
```
**Contrato de Salida:** Proporciona solo el c√≥digo Python de la funci√≥n refactorizada.
**Restricciones:** No cambies la l√≥gica de negocio. Mant√©n la misma firma de funci√≥n.</code></pre>
                </div>
            </div>
        </div>

        <div id="tecnicas" class="page-section">
            <h2 class="text-3xl font-bold mb-4 text-gray-900">T√©cnicas Avanzadas</h2>
            <p class="text-lg text-gray-600 mb-6">M√°s all√° de la estructura b√°sica, existen t√©cnicas avanzadas para guiar el razonamiento del modelo hacia soluciones m√°s complejas y fiables.</p>
            <div class="space-y-4">
                <div class="card p-6">
                    <h3 class="font-bold text-xl mb-2">Decomposition (Descomposici√≥n)</h3>
                    <p class="text-gray-700">Divide un problema complejo en pasos m√°s peque√±os y manejables. El LLM planifica primero la soluci√≥n y luego ejecuta cada paso.</p>
                    <ul class="list-disc list-inside mt-2 space-y-1">
                        <li><strong>Chain of Thought (CoT):</strong> Pide al modelo que "piense paso a paso" para tareas de razonamiento. El modelo externaliza su proceso de pensamiento, lo que a menudo conduce a mejores resultados.</li>
                        <li><strong>Tree of Thoughts (ToT):</strong> El modelo explora m√∫ltiples caminos de razonamiento en paralelo, evaluando cada uno y eligiendo el m√°s prometedor. √ötil para problemas con m√∫ltiples soluciones posibles.</li>
                    </ul>
                </div>
                <div class="card p-6">
                    <h3 class="font-bold text-xl mb-2">Meta-Prompting</h3>
                    <p class="text-gray-700">Utiliza un prompt para generar o refinar otro prompt. Es una t√©cnica para abstraer y estandarizar la creaci√≥n de prompts, asegurando que todos sigan las mejores pr√°cticas y restricciones de seguridad.</p>
                    <p class="mt-2 text-gray-600"><strong>Ejemplo de uso:</strong> "Dado el siguiente prompt de usuario, reescr√≠belo para que siga nuestra plantilla de anatom√≠a de prompt, asegurando que incluya un rol, tarea, y un contrato de salida en formato JSON."</p>
                </div>
                <div class="card p-6">
                    <h3 class="font-bold text-xl mb-2">Prompt Ensembles y Few-Shot Contrastivo</h3>
                    <p class="text-gray-700">Combina varias t√©cnicas para mejorar la robustez. Un "ensemble" podr√≠a ejecutar el mismo prompt con diferentes temperaturas y elegir la mejor respuesta mediante un criterio de votaci√≥n. El "few-shot contrastivo" proporciona no solo ejemplos de lo que se debe hacer, sino tambi√©n ejemplos de lo que se debe evitar (anti-patrones), guiando al modelo de forma m√°s precisa.</p>
                </div>
            </div>
        </div>

        <div id="diseno" class="page-section">
            <h2 class="text-3xl font-bold mb-4 text-gray-900">Dise√±o Sistem√°tico</h2>
            <p class="text-lg text-gray-600 mb-6">El dise√±o de prompts a escala requiere un enfoque sistem√°tico, comenzando con una taxonom√≠a clara de las tareas de ingenier√≠a de software que pueden ser automatizadas o asistidas por LLMs.</p>
            <div class="card p-6">
                <h3 class="font-bold text-xl mb-4">Taxonom√≠a de Tareas de C√≥digo</h3>
                <p class="mb-6">Clasificar las tareas ayuda a crear plantillas estandarizadas y m√©tricas de evaluaci√≥n espec√≠ficas para cada dominio.</p>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                    <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                        <span class="text-xl">üí°</span>
                        <span class="font-medium">Generaci√≥n</span>
                    </div>
                    <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                        <span class="text-xl">üîß</span>
                        <span class="font-medium">Refactorizaci√≥n</span>
                    </div>
                     <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                        <span class="text-xl">üìö</span>
                        <span class="font-medium">Documentaci√≥n</span>
                    </div>
                     <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                        <span class="text-xl">üß™</span>
                        <span class="font-medium">Pruebas (Tests)</span>
                    </div>
                     <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                        <span class="text-xl">‚úàÔ∏è</span>
                        <span class="font-medium">Migraciones</span>
                    </div>
                     <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                        <span class="text-xl">‚ö°Ô∏è</span>
                        <span class="font-medium">Rendimiento</span>
                    </div>
                     <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                        <span class="text-xl">üõ°Ô∏è</span>
                        <span class="font-medium">Seguridad</span>
                    </div>
                     <div class="flex items-center space-x-3 p-3 bg-gray-50 rounded-lg">
                        <span class="text-xl">üèóÔ∏è</span>
                        <span class="font-medium">Infra-as-Code</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="plantillas" class="page-section">
            <h2 class="text-3xl font-bold mb-4 text-gray-900">Biblioteca de Plantillas</h2>
            <p class="text-lg text-gray-600 mb-6">Una colecci√≥n de plantillas parametrizables y listas para usar para las tareas m√°s comunes. Filtra por categor√≠a para encontrar lo que necesitas.</p>
            
            <div id="template-filters" class="flex flex-wrap gap-2 mb-6">
            </div>

            <div id="template-library" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </div>
        </div>

        <div id="evaluacion" class="page-section">
            <h2 class="text-3xl font-bold mb-4 text-gray-900">Evaluaci√≥n y M√©tricas</h2>
            <p class="text-lg text-gray-600 mb-6">"Si no puedes medirlo, no puedes mejorarlo". La evaluaci√≥n de prompts de c√≥digo debe ser autom√°tica, cuantitativa y estar integrada en el pipeline de CI/CD.</p>
            <div class="grid lg:grid-cols-2 gap-8">
                <div class="card p-6">
                    <h3 class="font-bold text-xl mb-4">Tipos de M√©tricas</h3>
                    <ul class="space-y-4">
                        <li class="border-l-4 border-blue-500 pl-4">
                            <h4 class="font-semibold">M√©tricas Autom√°ticas (Sint√°cticas)</h4>
                            <p class="text-gray-700">Verifican la correcci√≥n y calidad estructural del c√≥digo.</p>
                            <p class="text-sm mt-1 text-gray-500">Ej: % de tests superados, puntuaci√≥n de linter, cobertura de c√≥digo diferencial, complejidad ciclom√°tica.</p>
                        </li>
                        <li class="border-l-4 border-green-500 pl-4">
                            <h4 class="font-semibold">M√©tricas Sem√°nticas (Funcionales)</h4>
                            <p class="text-gray-700">Eval√∫an si el c√≥digo cumple con la intenci√≥n y los requisitos.</p>
                            <p class="text-sm mt-1 text-gray-500">Ej: Cumplimiento de requisitos (LLM-as-a-Judge), similitud con una soluci√≥n de referencia, seguridad (SAST).</p>
                        </li>
                    </ul>
                     <div class="mt-8">
                        <h3 class="font-bold text-xl mb-4">Perfil de Calidad del Prompt</h3>
                        <p class="text-sm text-gray-600 mb-2">Un radar chart puede visualizar la calidad de la salida de un prompt a trav√©s de m√∫ltiples dimensiones clave.</p>
                        <div class="chart-container">
                            <canvas id="evaluationChart"></canvas>
                        </div>
                    </div>
                </div>
                <div class="card p-6">
                    <h3 class="font-bold text-xl mb-4">Pipeline de Evaluaci√≥n Continua</h3>
                    <p class="mb-4">As√≠ es como se integra la evaluaci√≥n en un flujo de CI/CD para cada cambio en un prompt:</p>
                    <div class="flex flex-col space-y-10 md:flex-row md:space-y-0 md:space-x-10 items-center">
                       <div class="cicd-step">
                           <h4 class="font-semibold">1. Commit</h4>
                           <p class="text-sm text-gray-600">Cambio en un prompt versionado en Git.</p>
                       </div>
                       <div class="cicd-step">
                           <h4 class="font-semibold">2. Batch Eval</h4>
                           <p class="text-sm text-gray-600">Se ejecuta el prompt contra un dataset de evaluaci√≥n.</p>
                       </div>
                       <div class="cicd-step">
                           <h4 class="font-semibold">3. M√©tricas</h4>
                           <p class="text-sm text-gray-600">Se calculan scores (tests, linter, etc.).</p>
                       </div>
                       <div class="cicd-step">
                           <h4 class="font-semibold">4. Gate</h4>
                           <p class="text-sm text-gray-600">Si el score supera el umbral, se aprueba el despliegue.</p>
                       </div>
                    </div>
                     <div class="mt-8">
                        <h3 class="font-bold text-xl mb-4">A/B Testing y Rollback</h3>
                        <p>Para prompts cr√≠ticos, se despliegan como "canary". Se exponen a un peque√±o porcentaje del tr√°fico y se comparan sus m√©tricas de negocio con la versi√≥n anterior. Si el rendimiento es inferior, un sistema autom√°tico realiza un rollback a la versi√≥n estable.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="seguridad" class="page-section">
            <h2 class="text-3xl font-bold mb-4 text-gray-900">Seguridad y √âtica</h2>
            <p class="text-lg text-gray-600 mb-6">El c√≥digo generado por IA introduce nuevos vectores de ataque y riesgos. El prompting defensivo es esencial para mitigarlos.</p>
            <div class="card p-6">
                <h3 class="font-bold text-xl mb-4">Principales Riesgos y Mitigaciones</h3>
                <div class="space-y-4">
                    <div>
                        <h4 class="font-semibold text-lg">Inyecci√≥n de Prompts</h4>
                        <p class="text-gray-700"><strong>Riesgo:</strong> Un usuario malicioso introduce instrucciones en la entrada de datos para secuestrar el comportamiento del LLM.</p>
                        <p class="text-gray-600 mt-1"><strong>Mitigaci√≥n:</strong> Validar y sanear rigurosamente todas las entradas del usuario. Usar delimitadores claros para separar las instrucciones del prompt de los datos del usuario. Monitorear las salidas en busca de anomal√≠as.</p>
                    </div>
                    <div>
                        <h4 class="font-semibold text-lg">Generaci√≥n de C√≥digo Inseguro</h4>
                        <p class="text-gray-700"><strong>Riesgo:</strong> El LLM genera c√≥digo con vulnerabilidades conocidas (ej. inyecci√≥n SQL, XSS).</p>
                        <p class="text-gray-600 mt-1"><strong>Mitigaci√≥n:</strong> Incluir restricciones de seguridad expl√≠citas en el prompt ("No uses `eval()`, utiliza APIs parametrizadas para SQL"). Integrar herramientas SAST (An√°lisis Est√°tico de Seguridad de Aplicaciones) en el pipeline de evaluaci√≥n para escanear el c√≥digo generado.</p>
                    </div>
                    <div>
                        <h4 class="font-semibold text-lg">Fuga de Secretos y Licencias</h4>
                        <p class="text-gray-700"><strong>Riesgo:</strong> El LLM podr√≠a ser entrenado con c√≥digo que contiene secretos o tener una licencia incompatible, y reproducirlo en la salida.</p>
                        <p class="text-gray-600 mt-1"><strong>Mitigaci√≥n:</strong> Utilizar modelos entrenados √©ticamente. Implementar esc√°neres post-generaci√≥n para detectar secretos y verificar la compatibilidad de licencias del c√≥digo generado.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="operativa" class="page-section">
            <h2 class="text-3xl font-bold mb-4 text-gray-900">Operativa y Mantenimiento</h2>
             <p class="text-lg text-gray-600 mb-6">La gesti√≥n de prompts en producci√≥n (LLMOps) requiere herramientas y procesos para asegurar la reproducibilidad, el versionado y la eficiencia.</p>
            <div class="card p-6">
                <h3 class="font-bold text-xl mb-4">Ciclo de Vida del Prompt en Producci√≥n</h3>
                 <ul class="list-decimal list-inside space-y-2 text-gray-700">
                    <li><strong>Versionado:</strong> Los prompts se almacenan en un repositorio Git, al igual que el c√≥digo. Cada cambio sigue un flujo de Pull Request.</li>
                    <li><strong>Cat√°logo Centralizado:</strong> Un registro o cat√°logo de prompts permite a los equipos descubrir, reutilizar y estandarizar prompts en toda la organizaci√≥n.</li>
                    <li><strong>CI/CD para Prompts:</strong> Pipelines automatizados que testean, eval√∫an y despliegan nuevas versiones de prompts, con pol√≠ticas de rollback.</li>
                    <li><strong>Gesti√≥n de Coste/Latencia:</strong> Monitorizaci√≥n continua del coste de tokens y la latencia de las respuestas. Uso de t√©cnicas de caching para prompts y respuestas comunes.</li>
                    <li><strong>Integraci√≥n con el Ecosistema:</strong> Conexi√≥n con IDEs (v√≠a plugins), sistemas de CI (GitHub Actions, GitLab CI), y herramientas de calidad de c√≥digo (ESLint, pytest, Semgrep).</li>
                </ul>
            </div>
        </div>

        <div id="recursos" class="page-section">
            <h2 class="text-3xl font-bold mb-4 text-gray-900">Recursos: Chuleta (Cheatsheet)</h2>
            <p class="text-lg text-gray-600 mb-6">Una gu√≠a de referencia r√°pida con los conceptos y heur√≠sticas m√°s importantes para el d√≠a a d√≠a.</p>
            <div class="card p-6">
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div>
                        <h4 class="font-bold text-lg mb-2 border-b pb-2">Estructura del Prompt</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>Rol:</strong> ¬øQui√©n eres?</li>
                            <li><strong>Tarea:</strong> ¬øQu√© haces?</li>
                            <li><strong>Contexto:</strong> ¬øCon qu√© lo haces?</li>
                            <li><strong>Formato:</strong> ¬øC√≥mo lo devuelves?</li>
                            <li><strong>Restricciones:</strong> ¬øQu√© no haces?</li>
                            <li><strong>Criterios:</strong> ¬øCu√°ndo est√° bien hecho?</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold text-lg mb-2 border-b pb-2">Heur√≠sticas Clave</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li>Ser expl√≠cito y directo.</li>
                            <li>Usar delimitadores para separar secciones.</li>
                            <li>Proporcionar ejemplos (few-shot).</li>
                            <li>Pedir al modelo que razone (CoT).</li>
                            <li>Especificar el formato de salida (JSON, YAML).</li>
                            <li>Iterar y medir, no asumir.</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-bold text-lg mb-2 border-b pb-2">Riesgos y Controles</h4>
                        <ul class="list-disc list-inside space-y-1 text-sm">
                            <li><strong>Ambig√ºedad ‚Üí</strong> Usar estructura prescriptiva.</li>
                            <li><strong>Alucinaciones ‚Üí</strong> Usar RAG, verificar salida.</li>
                            <li><strong>Inseguridad ‚Üí</strong> Prompts defensivos, SAST.</li>
                            <li><strong>Inyecci√≥n ‚Üí</strong> Sanear entradas, delimitadores.</li>
                            <li><strong>Mal rendimiento ‚Üí</strong> Incluir restricciones de eficiencia.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            const sections = document.querySelectorAll('.page-section');
            let evaluationChart = null;

            const templates = [
                {
                    title: 'Generar Tests Unitarios (Python)',
                    tags: ['Python', 'Test'],
                    content: `
# ROL: Act√∫a como un Ingeniero de QA experto en Python y la librer√≠a pytest.
# TAREA: Genera una suite de tests unitarios exhaustiva para la siguiente funci√≥n.
# CONTEXTO:
# Funci√≥n a testear:
\`\`\`python
{{CODE_FUNCTION}}
\`\`\`
# Criterios:
# 1. Cubre todos los casos de borde (edge cases), incluyendo entradas nulas, vac√≠as y con formato incorrecto.
# 2. Utiliza mocks para cualquier dependencia externa (ej. APIs, bases de datos).
# 3. Sigue las convenciones de nomenclatura de pytest.
# 4. Incluye al menos un test parametrizado si es aplicable.
# CONTRATO DE SALIDA: Proporciona √∫nicamente el c√≥digo Python para el archivo de test en un solo bloque de c√≥digo markdown.
                    `
                },
                {
                    title: 'Refactorizar a C√≥digo As√≠ncrono (JS)',
                    tags: ['JavaScript', 'Refactor'],
                    content: `
# ROL: Eres un desarrollador senior de JavaScript, experto en concurrencia y async/await.
# TAREA: Refactoriza el siguiente c√≥digo basado en promesas (.then/.catch) para usar la sintaxis async/await moderna.
# CONTEXTO:
\`\`\`javascript
{{CODE_FUNCTION}}
\`\`\`
# RESTRICCIONES:
# - No alteres la l√≥gica de negocio.
# - Aseg√∫rate de que el manejo de errores sea equivalente al del c√≥digo original.
# - Mant√©n la misma firma de funci√≥n.
# CONTRATO DE SALIDA: Devuelve solo el c√≥digo de la funci√≥n refactorizada en un bloque de c√≥digo markdown para JavaScript.
                    `
                },
                {
                    title: 'Generar Documentaci√≥n (Go)',
                    tags: ['Go', 'Docs'],
                    content: `
# ROL: Eres un desarrollador Go que sigue rigurosamente las convenciones de GoDoc.
# TAREA: Genera la documentaci√≥n completa para la siguiente funci√≥n p√∫blica de Go.
# CONTEXTO:
\`\`\`go
{{CODE_FUNCTION}}
\`\`\`
# CRITERIOS:
# 1. El comentario debe empezar con el nombre de la funci√≥n.
# 2. Describe qu√© hace la funci√≥n, sus par√°metros y lo que devuelve.
# 3. Incluye un ejemplo de uso si es relevante.
# CONTRATO DE SALIDA: Proporciona el c√≥digo Go con la documentaci√≥n GoDoc a√±adida. No modifiques el cuerpo de la funci√≥n.
                    `
                },
                {
                    title: 'Optimizar Consulta SQL',
                    tags: ['SQL', 'Rendimiento'],
                    content: `
# ROL: Eres un Administrador de Base de Datos (DBA) experto en optimizaci√≥n de consultas en PostgreSQL.
# TAREA: Analiza la siguiente consulta SQL y reescr√≠bela para mejorar su rendimiento.
# CONTEXTO:
# Consulta original:
\`\`\`sql
{{SQL_QUERY}}
\`\`\`
# Esquema de tablas relevantes:
\`\`\`sql
{{TABLE_SCHEMAS}}
\`\`\`
# TAREA ADICIONAL: Explica brevemente por qu√© tu versi√≥n es m√°s performante (ej. uso de √≠ndices, reducci√≥n de joins, etc.).
# CONTRATO DE SALIDA: Proporciona la consulta optimizada en un bloque de c√≥digo SQL y la explicaci√≥n en un bloque de texto separado.
                    `
                },
                 {
                    title: 'Crear Dockerfile (Node.js)',
                    tags: ['Infra', 'JavaScript'],
                    content: `
# ROL: Ingeniero DevOps experto en contenedores y Node.js.
# TAREA: Genera un Dockerfile optimizado para producci√≥n para una aplicaci√≥n Node.js.
# CONTEXTO:
# - La aplicaci√≥n es una API Express.
# - El punto de entrada es 'server.js'.
# - El gestor de paquetes es 'npm'.
# - El puerto expuesto es el 8080.
# CRITERIOS DE OPTIMIZACI√ìN:
# 1. Usa multi-stage builds para reducir el tama√±o de la imagen final.
# 2. Empieza desde una imagen base slim (ej. node:18-alpine).
# 3. Copia package.json y package-lock.json e instala dependencias antes de copiar el resto del c√≥digo para aprovechar el cache de capas de Docker.
# 4. Ejecuta la aplicaci√≥n con un usuario no-root.
# CONTRATO DE SALIDA: Genera √∫nicamente el contenido del Dockerfile en un bloque de c√≥digo.
`
                },
                {
                    title: 'An√°lisis de Seguridad (Java)',
                    tags: ['Java', 'Seguridad'],
                    content: `
# ROL: Act√∫a como un experto en seguridad de aplicaciones (AppSec) especializado en Java y en las vulnerabilidades del OWASP Top 10.
# TAREA: Revisa el siguiente fragmento de c√≥digo Java y detecta posibles vulnerabilidades de seguridad.
# CONTEXTO:
\`\`\`java
{{CODE_SNIPPET}}
\`\`\`
# CONTRATO DE SALIDA:
# 1. Lista las vulnerabilidades encontradas.
# 2. Para cada una, describe el riesgo y su tipo (ej. Inyecci√≥n SQL, XSS).
# 3. Proporciona una versi√≥n corregida del c√≥digo que mitigue la vulnerabilidad.
# Formatea la salida en Markdown.
`
                }
            ];

            const library = document.getElementById('template-library');
            const filtersContainer = document.getElementById('template-filters');
            
            const allTags = [...new Set(templates.flatMap(t => t.tags))];
            
            filtersContainer.innerHTML = `<button class="tag-button active bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-full" data-tag="all">Todos</button>` +
                allTags.map(tag => `<button class="tag-button bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-full" data-tag="${tag}">${tag}</button>`).join('');
            
            const renderTemplates = (filter = 'all') => {
                library.innerHTML = '';
                const filteredTemplates = filter === 'all' ? templates : templates.filter(t => t.tags.includes(filter));
                
                filteredTemplates.forEach(template => {
                    const card = document.createElement('div');
                    card.className = 'card flex flex-col';
                    card.innerHTML = `
                        <div class="p-4 flex-grow">
                            <h4 class="font-bold text-lg">${template.title}</h4>
                            <div class="flex flex-wrap gap-2 mt-2">
                                ${template.tags.map(tag => `<span class="text-xs font-semibold bg-blue-100 text-blue-800 px-2 py-1 rounded-full">${tag}</span>`).join('')}
                            </div>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-b-lg">
                           <div class="code-block">
                               <button class="copy-btn">Copiar</button>
                               <pre><code>${template.content.trim().replace(/</g, "&lt;").replace(/>/g, "&gt;")}</code></pre>
                           </div>
                        </div>
                    `;
                    library.appendChild(card);
                });
            };

            filtersContainer.addEventListener('click', e => {
                if (e.target.tagName === 'BUTTON') {
                    document.querySelectorAll('#template-filters .tag-button').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    renderTemplates(e.target.dataset.tag);
                }
            });

            library.addEventListener('click', e => {
                if (e.target.classList.contains('copy-btn')) {
                    const code = e.target.nextElementSibling.querySelector('code').innerText;
                    navigator.clipboard.writeText(code).then(() => {
                        e.target.innerText = 'Copiado!';
                        setTimeout(() => { e.target.innerText = 'Copiar'; }, 2000);
                    });
                }
            });

            function renderEvaluationChart() {
                const ctx = document.getElementById('evaluationChart').getContext('2d');
                if (evaluationChart) {
                    evaluationChart.destroy();
                }
                evaluationChart = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['Correcci√≥n (Tests)', 'Calidad (Linter)', 'Seguridad (SAST)', 'Eficiencia', 'Legibilidad', 'Cobertura'],
                        datasets: [{
                            label: 'Prompt A (Actual)',
                            data: [95, 85, 90, 75, 80, 92],
                            fill: true,
                            backgroundColor: 'rgba(0, 86, 179, 0.2)',
                            borderColor: 'rgb(0, 86, 179)',
                            pointBackgroundColor: 'rgb(0, 86, 179)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgb(0, 86, 179)'
                        }, {
                            label: 'Prompt B (Candidato)',
                            data: [98, 88, 92, 85, 82, 95],
                            fill: true,
                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                            borderColor: 'rgb(54, 162, 235)',
                            pointBackgroundColor: 'rgb(54, 162, 235)',
                            pointBorderColor: '#fff',
                            pointHoverBackgroundColor: '#fff',
                            pointHoverBorderColor: 'rgb(54, 162, 235)'
                        }]
                    },
                    options: {
                        maintainAspectRatio: false,
                        elements: {
                            line: {
                                borderWidth: 3
                            }
                        },
                        scales: {
                            r: {
                                angleLines: {
                                    display: false
                                },
                                suggestedMin: 50,
                                suggestedMax: 100
                            }
                        }
                    }
                });
            }

            function navigate(hash) {
                if (!hash) hash = '#resumen';
                
                sidebarLinks.forEach(link => {
                    if (link.getAttribute('href') === hash) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });

                sections.forEach(section => {
                    if ('#' + section.id === hash) {
                        section.classList.add('active');
                        if (section.id === 'evaluacion') {
                           setTimeout(renderEvaluationChart, 0);
                        }
                    } else {
                        section.classList.remove('active');
                    }
                });
                 document.querySelector('main').scrollTop = 0;
            }

            sidebarLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const hash = e.currentTarget.getAttribute('href');
                    window.location.hash = hash;
                });
            });

            window.addEventListener('hashchange', () => navigate(window.location.hash));
            
            navigate(window.location.hash || '#resumen');
            renderTemplates();
        });
    </script>
</body>
</html>
